# CSS 定位

## 1. 定位

### 1.1 为什么需要定位

-   浮动可以让多个块级盒子一行没缝隙排列显示，经常用于横向排列盒子
-   定位则是可以让盒子自由地在某个盒子内部移动或固定在屏幕中某个位置，并且可以压住其他盒子

### 1.2 定位组成

定位：将盒子**定**在某一个**位**置，所以**定位也是在摆放盒子，按照定位的方式移动盒子**

定位 = 定位模式 + 边偏移

**定位模式**用于指定一个元素在文档中的定位方式，**边偏移**则决定该元素的最终位置

#### 1.2.1 定位模式

定位模式决定元素的定位方式，它通过 CSS 的 `position` 属性来设置，其值可以分为四个：

| 值         |     说明     |
| :--------- | :----------: |
| `static`   | **静态**定位 |
| `relative` | **相对**定位 |
| `absolute` | **绝对**定位 |
| `fixed`    | **固定**定位 |

#### 1.2.2 边偏移

边偏移就是定位的盒子移动到最终的位置。有 `top` , `bottom` , `left` , `right` 四个值

| 属性     | 示例           | 说明                                                 |
| -------- | -------------- | ---------------------------------------------------- |
| `top`    | `top: 80px`    | **顶部**偏移量，定义元素相对于父元素**上边线的距离** |
| `bottom` | `bottom: 80px` | **底部**偏移量，定义元素相对于父元素**下边线的距离** |
| `left`   | `left: 80px`   | **左侧**偏移量，定义元素相对于父元素**左边线的距离** |
| `right`  | `right: 80px`  | **右侧**偏移量，定义元素相对于父元素**右边线的距离** |

### 1.3 静态定位 

静态定位是元素的**默认定位方式**，就是没有定位

语法：

```css
selector { position: static; }
```

-   静态定位按照标准流特性摆放位置，它没有边偏移
-   静态定位在布局中很少使用

### 1.4 相对定位

**相对定位**是指相对它**原来的位置**，进行移动

语法：

```css
selector { position: relative; }
```

特点：

-   它是相对于自己原来的位置进行移动
-   **原来**在标准流的**位置**继续占有，后面的元素仍然以标准流的方式对待 (**不脱标**)

### 1.5 绝对定位

**绝对定位**是指相对它的**父级元素**的位置，进行移动

语法：

```css
selector { position: absolute; }
```

特点：

-   如果**没有父级元素**或者**父级元素没有定位**，则以浏览器为准进行定位
-   如果父级元素有定位 (相对、绝对、固定) , 则以最近一级有定位的父级元素为准进行移动
-   绝对定位**不再占有原来的位置** (脱标)

### 1.6 子绝父相

子绝父相：**子元素使用绝对定位的话，父元素要使用相对定位**

1.   子级元素绝对定位，不占用位置，可以放到父级盒子任意位置，不影响其他盒子
2.   父级盒子需要加定位限制子盒子在父级盒子内显示
3.   父盒子布局时需要占位置，因此父级盒子只能是相对定位

总结：**因为父级盒子需要占有位置，因此是相对定位。子盒子不需要占位置，因此是绝对定位**

### 1.7 固定定位

**固定定位**是元素**固定于浏览器可视区的位置**。主要使用场景：在浏览器页面滚动时，不改变位置的元素

语法：

```css
selector { position: fixed }
```

特点：

-   以浏览器的可视窗口为参照点移动元素
    -   跟父元素没有任何关系
    -   不随滚动条滚动
-   固定定位**不占有原先的位置**

**固定盒子在版心右侧位置**

1.   先让固定定位的盒子 `left: 50;` 移动到浏览器可视区的一半位置
2.   再让固定定位的盒子 `margin-left: 版心宽度一半的距离;` 多移动版心宽度的一半位置

### 1.8 粘性定位

**粘性定位**可以被认为是相对定位和固定定位i而的混合

语法：

```css
selector { position: sticky; top: 10px; }
```

特点：

-   以浏览器的可视窗口为参照点移动元素
-   粘性定位**占有原来的位置**
-   必须添加 `top` , `left` , `right` , `bottom` 其中一个才生效

### 1.9 定位的总结

| 定位模式            | 是否脱标 | 移动位置                   | 是否常用 |
| ------------------- | -------- | -------------------------- | -------- |
| `static` 静态定位   | 否       | 不能使用边偏移             | 不常用   |
| `relative` 相对定位 | 否       | 相对自身原本位置进行移动   | 常用     |
| `absolute` 绝对定位 | 是       | 相对于父级元素位置进行移动 | 常用     |
| `fixed` 固定定位    | 是       | 浏览器的可视窗口           | 常用     |
| `sticky` 粘性定位   | 否       | 浏览器的可视窗口           | 不常用   |

### 1.10 定位叠放次序

在使用定位布局时，可能会出现盒子重叠的情况。此时，可以使用 `z-index` 属性来控制盒子的顺序

语法：

```css
selector { z-index: 1; }
```

说明：

-   数值可以是正整数、负整数或0。默认值是 `auto` , 数值越大，盒子越靠上
-   如果数值相同，则按照书写的顺序，后来居上
-   数值不带单位
-   只有定位的盒子才有 `z-index` 这个属性

### 1.11 定位拓展

#### 1. 绝对定位的盒子居中

加了绝对定位的盒子不能通过 `margin: 0 auto;` 水平居中。但是可以通过一下步骤实现水平居中：

1. `left: 50%;` 
2. `margin-left: -100px;` 具体数值为盒子宽度的一般

#### 2. 定位特殊特性

绝对定位和固定定位和浮动类似

1. 行内元素添加了绝对或固定定位可以直接添加宽度和高度
2. 块级元素添加绝对或固定定位，如果没指定宽度或高度，则默认大小是内容的大小

#### 3. 脱标的盒子不会有外边距塌陷

浮动元素、绝对定位或固定定位的元素都不会有外边距合并的问题

